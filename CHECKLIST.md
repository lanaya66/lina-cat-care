# 部署前检查清单

在部署应用到生产环境之前，请确认以下项目：

## ✅ 基础配置

- [x] Supabase 项目已创建并配置
- [x] 数据库表结构已创建（`food_cards`, `timeline_entries`）
- [x] RLS 策略已正确配置
- [x] 数据库迁移已执行（`MIGRATION.sql`）
- [ ] `.env` 文件已配置（仅本地开发用）
- [ ] `.env` 已添加到 `.gitignore`（已自动配置）

## ✅ 代码质量

- [x] 所有 linter 错误已修复
- [x] TypeScript 编译无错误
- [x] 所有表单的时间选择器改为 5 分钟单位
- [x] 输入框支持输入 0 值
- [x] 备餐表单支持"已经全部吃完"选项

## ✅ 功能测试

### 认证功能
- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] 用户登出功能正常

### 时间线记录
- [ ] 可以添加尿团记录
- [ ] 可以添加大便记录
- [ ] 可以添加用药记录
- [ ] 可以添加安静呼吸数记录
- [ ] 可以添加状态记录
- [ ] 可以编辑独立记录
- [ ] 时间线正确排序（最新在上）

### 食物管理
- [ ] 可以创建备餐
- [ ] 可以为食物加水
- [ ] 可以为食物加食物
- [ ] 可以记录剩余量
- [ ] 可以结算食物
- [ ] 可以创建备餐并立即结算（已经全部吃完）
- [ ] 可以编辑食物相关记录
- [ ] 正在吃的页面正确显示活动食物卡片

### 统计功能
- [ ] 今日统计正确计算
  - [ ] 干物质食物量正确
  - [ ] 水摄入量正确（含食物中的水）
  - [ ] 尿团、大便统计正确
  - [ ] 安静呼吸数统计正确
- [ ] 多日趋势正确显示
  - [ ] 7 天趋势图正确
  - [ ] 30 天趋势图正确
  - [ ] 呼吸数正常范围参考线显示

## ✅ 用户体验

- [x] 移动端响应式设计良好
- [x] 表单易于填写
- [x] 错误提示清晰
- [x] 加载状态有提示
- [ ] PWA 图标已准备（参见 `public/ICONS.md`）

## ✅ 安全性

- [x] `.env` 文件不会被提交到 Git
- [x] RLS 策略确保用户只能访问自己的数据
- [ ] Supabase anon key 已正确配置（只读权限）
- [ ] 生产环境的环境变量已在 Vercel 中配置

## ✅ 部署准备

- [ ] 代码已推送到 GitHub
- [ ] 已在 Vercel 中创建项目
- [ ] Vercel 环境变量已配置
- [ ] 部署成功并可访问
- [ ] 在手机上测试过

## 📝 可选优化（上线后）

- [ ] 启用 Supabase 邮箱验证
- [ ] 配置自定义域名
- [ ] 设置 Supabase 数据库自动备份提醒
- [ ] 添加 PWA 应用图标
- [ ] 监控应用性能和错误
- [ ] 收集用户反馈

## 🐛 已知问题

暂无

## 📚 相关文档

- `SETUP.md` - 本地开发环境配置
- `DEPLOY.md` - 部署到 Vercel 的详细步骤
- `RLS_POLICY_FIX.md` - 数据库权限配置
- `MIGRATION.sql` - 数据库迁移脚本
- `UPDATE_NOTES.md` - 功能更新说明
- `DATA_FIX_GUIDE.md` - 历史数据修复指南
- `public/ICONS.md` - PWA 图标说明

## 💡 提示

1. **首次部署**：建议先完成基础配置和功能测试
2. **逐步上线**：可以先自己使用几天，确认稳定后再分享给家人
3. **数据备份**：定期在 Supabase Dashboard 中创建备份
4. **监控使用**：关注 Vercel 和 Supabase 的使用量，确保在免费额度内

