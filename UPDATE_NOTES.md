# ðŸ”„ æ›´æ–°è¯´æ˜Ž

## æœ¬æ¬¡æ›´æ–°å†…å®¹

### âœ… 1. æ–°å¢ž"å®‰é™å‘¼å¸æ•°"è®°å½•åŠŸèƒ½

- **æ—¶é—´çº¿æ·»åŠ è®°å½•**ï¼šå¯ä»¥è®°å½•çŒ«å’ªçš„å®‰é™å‘¼å¸æ•°ï¼ˆæ¬¡/åˆ†é’Ÿï¼‰
- **ä»Šæ—¥ç»Ÿè®¡æ˜¾ç¤º**ï¼šæ˜¾ç¤ºå½“æ—¥æ‰€æœ‰å‘¼å¸æ•°è®°å½•ï¼Œå¼‚å¸¸å€¼ä¼šé«˜äº®æç¤º
- **è¶‹åŠ¿å›¾è¡¨**ï¼šæ–°å¢žå‘¼å¸æ•°è¶‹åŠ¿å›¾ï¼Œå¸¦æ­£å¸¸èŒƒå›´å‚è€ƒçº¿ï¼ˆ20-30æ¬¡/åˆ†é’Ÿï¼‰
- **å¼‚å¸¸æé†’**ï¼šå‘¼å¸æ•° >40 æˆ– <15 ä¼šæ˜¾ç¤ºè­¦å‘Š

### âœ… 2. ä¿®å¤é£Ÿç‰©å’Œæ°´æ‘„å…¥é‡è®¡ç®—é€»è¾‘

#### é—®é¢˜æ ¹æº
ä¹‹å‰çš„è®¡ç®—é€»è¾‘æ··æ·†äº†"é£Ÿç‰©æœ¬èº«"å’Œ"æ€»é‡é‡"çš„æ¦‚å¿µï¼Œå¯¼è‡´ï¼š
- é£Ÿç‰©æ‘„å…¥é‡åå°‘
- æ°´æ‘„å…¥é‡åå¤š

#### æ–°çš„è®¡ç®—æ¨¡åž‹

**æ ¸å¿ƒæ¦‚å¿µï¼š**
```
æ€»å‰©ä½™é‡ = é£Ÿç‰©é‡é‡ + é¢å¤–åŠ æ°´é‡
```

**é£Ÿç‰©é‡é‡**ï¼šé£Ÿç‰©æœ¬èº«çš„é‡é‡ï¼ˆåŒ…å«å…¶è‡ªèº«çš„æ°´åˆ†ï¼‰
**é¢å¤–åŠ æ°´**ï¼šåŽç»­æ·»åŠ çš„çº¯æ°´é‡é‡

**ä¸¾ä¾‹è¯´æ˜Žï¼š**
```
å¤‡é¤ï¼š100g ç½å¤´ï¼ˆ78%å«æ°´ï¼‰ + 20g æ°´
  - é£Ÿç‰©é‡é‡ï¼š100g
  - é¢å¤–åŠ æ°´ï¼š20g
  - æ€»å‰©ä½™é‡ï¼š120g
  - æ°´åˆ†æ¯”ä¾‹ï¼š(100Ã—0.78 + 20) / 120 = 81.67%

è®°å½•å‰©ä½™ 60gï¼š
  - æ¶ˆè€—æ€»é‡ï¼š60g
  - æŒ‰æ¯”ä¾‹åˆ†é…ï¼š
    * é£Ÿç‰©æ¶ˆè€—ï¼š60 Ã— (100/120) = 50g
    * é¢å¤–æ°´æ¶ˆè€—ï¼š60 Ã— (20/120) = 10g
  - é£Ÿç‰©ä¸­çš„æ°´ï¼š50 Ã— 0.78 = 39g
  - æ€»æ°´æ‘„å…¥ï¼š39 + 10 = 49g
  - çº¯é£Ÿç‰©æ‘„å…¥ï¼š50 Ã— 0.22 = 11g
```

#### æ–°å¢žå­—æ®µ
åœ¨ `food_cards` è¡¨ä¸­æ–°å¢žï¼š
- `current_food_weight`ï¼šå½“å‰é£Ÿç‰©é‡é‡
- `current_added_water`ï¼šå½“å‰é¢å¤–åŠ æ°´é‡

è¿™æ ·å¯ä»¥ç²¾ç¡®è¿½è¸ªé£Ÿç‰©å’Œæ°´çš„åˆ†åˆ«æ¶ˆè€—æƒ…å†µã€‚

---

## ðŸ”§ å¦‚ä½•åº”ç”¨æ›´æ–°

### æ­¥éª¤ 1ï¼šæ‰§è¡Œæ•°æ®åº“è¿ç§»

1. æ‰“å¼€ Supabase é¡¹ç›®
2. ç‚¹å‡»å·¦ä¾§ **ðŸ—„ï¸ SQL Editor**
3. ç‚¹å‡» **+ New query**
4. å¤åˆ¶ `MIGRATION.sql` æ–‡ä»¶ä¸­çš„ SQL ä»£ç 
5. ç‚¹å‡» **Run** æ‰§è¡Œ

### æ­¥éª¤ 2ï¼šä¿®å¤åŽ†å²æ•°æ®

1. åˆ·æ–°æµè§ˆå™¨é¡µé¢
2. è¿›å…¥ **"ä»Šæ—¥ç»Ÿè®¡"** é¡µé¢
3. ç‚¹å‡»å³ä¸‹è§’çš„ **"ä¿®å¤åŽ†å²æ•°æ®"** æŒ‰é’®ï¼ˆç´«è‰²åœ†å½¢æŒ‰é’®ï¼‰
4. ç¡®è®¤åŽç­‰å¾…è‡ªåŠ¨ä¿®å¤å®Œæˆ
5. ä¿®å¤å®ŒæˆåŽåˆ·æ–°é¡µé¢

**ä¿®å¤è¿‡ç¨‹ä¼šï¼š**
- âœ… è‡ªåŠ¨éåŽ†æ‰€æœ‰é£Ÿç‰©å¡ç‰‡å’Œæ—¶é—´çº¿è®°å½•
- âœ… ä½¿ç”¨æ–°é€»è¾‘é‡æ–°è®¡ç®—æ‰€æœ‰æ‘„å…¥é‡
- âœ… æ›´æ–°æ•°æ®åº“ä¸­çš„æ‰€æœ‰ç›¸å…³è®°å½•
- âœ… æ˜¾ç¤ºä¿®å¤è¿›åº¦å’Œç»“æžœ

### æ­¥éª¤ 3ï¼šéªŒè¯æ•°æ®

ä¿®å¤å®ŒæˆåŽï¼š
1. æŸ¥çœ‹ä»Šæ—¥ç»Ÿè®¡ï¼Œæ•°å€¼åº”è¯¥æ›´å‡†ç¡®
2. é£Ÿç‰©æ‘„å…¥é‡åº”è¯¥å¢žåŠ 
3. æ°´æ‘„å…¥é‡åº”è¯¥å‡å°‘ï¼ˆæ›´æŽ¥è¿‘å®žé™…ï¼‰

---

## ðŸ“Š è®¡ç®—é€»è¾‘è¯¦è§£

### å¤‡é¤æ—¶
```typescript
æ€»å‰©ä½™é‡ = é£Ÿç‰©é‡é‡ + åŠ æ°´é‡
æ°´åˆ†æ¯”ä¾‹ = (é£Ÿç‰©é‡é‡ Ã— é£Ÿç‰©å«æ°´æ¯” + åŠ æ°´é‡) / æ€»å‰©ä½™é‡
```

### åŠ æ°´æ—¶
```typescript
æ–°é¢å¤–åŠ æ°´ = åŽŸé¢å¤–åŠ æ°´ + æœ¬æ¬¡åŠ æ°´
æ–°æ€»å‰©ä½™ = é£Ÿç‰©é‡é‡ + æ–°é¢å¤–åŠ æ°´
æ–°æ°´åˆ†æ¯”ä¾‹ = (é£Ÿç‰©é‡é‡ Ã— é£Ÿç‰©å«æ°´æ¯” + æ–°é¢å¤–åŠ æ°´) / æ–°æ€»å‰©ä½™
```

### åŠ é£Ÿç‰©æ—¶
```typescript
æ–°é£Ÿç‰©é‡é‡ = åŽŸé£Ÿç‰©é‡é‡ + æœ¬æ¬¡åŠ é£Ÿç‰©
æ–°æ€»å‰©ä½™ = æ–°é£Ÿç‰©é‡é‡ + é¢å¤–åŠ æ°´
æ–°æ°´åˆ†æ¯”ä¾‹ = (æ–°é£Ÿç‰©é‡é‡ Ã— é£Ÿç‰©å«æ°´æ¯” + é¢å¤–åŠ æ°´) / æ–°æ€»å‰©ä½™
```

### è®°å½•å‰©ä½™/ç»“ç®—æ—¶
```typescript
æ¶ˆè€—æ€»é‡ = ä¸Šæ¬¡å‰©ä½™ - æœ¬æ¬¡å‰©ä½™

// æŒ‰æ¯”ä¾‹åˆ†é…æ¶ˆè€—
é£Ÿç‰©æ¶ˆè€— = æ¶ˆè€—æ€»é‡ Ã— (é£Ÿç‰©é‡é‡ / æ€»å‰©ä½™)
é¢å¤–æ°´æ¶ˆè€— = æ¶ˆè€—æ€»é‡ Ã— (é¢å¤–åŠ æ°´ / æ€»å‰©ä½™)

// è®¡ç®—å®žé™…æ‘„å…¥
é£Ÿç‰©ä¸­çš„æ°´ = é£Ÿç‰©æ¶ˆè€— Ã— é£Ÿç‰©å«æ°´æ¯”
çº¯é£Ÿç‰©æ‘„å…¥ = é£Ÿç‰©æ¶ˆè€— Ã— (1 - é£Ÿç‰©å«æ°´æ¯”)
æ€»æ°´æ‘„å…¥ = é£Ÿç‰©ä¸­çš„æ°´ + é¢å¤–æ°´æ¶ˆè€—

// æ›´æ–°å‰©ä½™
æ–°é£Ÿç‰©é‡é‡ = é£Ÿç‰©é‡é‡ - é£Ÿç‰©æ¶ˆè€—
æ–°é¢å¤–åŠ æ°´ = é¢å¤–åŠ æ°´ - é¢å¤–æ°´æ¶ˆè€—
```

---

## ðŸŽ¯ éªŒè¯æ–¹æ³•

### æµ‹è¯•æ¡ˆä¾‹
1. **å¤‡é¤**ï¼š100g ç½å¤´ï¼ˆ78%å«æ°´ï¼‰+ 20g æ°´
   - é¢„æœŸæ€»å‰©ä½™ï¼š120g
   - é¢„æœŸæ°´åˆ†æ¯”ä¾‹ï¼š81.67%

2. **è®°å½•å‰©ä½™ 60g**ï¼š
   - é¢„æœŸé£Ÿç‰©æ‘„å…¥ï¼š50g
   - é¢„æœŸæ°´æ‘„å…¥ï¼š49gï¼ˆ39gé£Ÿç‰©ä¸­çš„æ°´ + 10gé¢å¤–æ°´ï¼‰
   - é¢„æœŸçº¯é£Ÿç‰©ï¼š11g

3. **ä»Šæ—¥ç»Ÿè®¡**ï¼š
   - é£Ÿç‰©æ‘„å…¥åº”æ˜¾ç¤ºï¼š50.0g
   - æ°´æ‘„å…¥åº”æ˜¾ç¤ºï¼š49.0g

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ—§æ•°æ®å…¼å®¹**ï¼šè¿ç§» SQL ä¼šè‡ªåŠ¨ä¸ºæ—§æ•°æ®åˆå§‹åŒ–æ–°å­—æ®µ
2. **æ–°å¤‡é¤**ï¼šä»ŽçŽ°åœ¨å¼€å§‹çš„å¤‡é¤ä¼šä½¿ç”¨æ–°çš„è®¡ç®—é€»è¾‘
3. **ç²¾åº¦æå‡**ï¼šæ–°é€»è¾‘æ›´å‡†ç¡®åœ°åæ˜ äº†å®žé™…æ‘„å…¥æƒ…å†µ

---

## ðŸ“ æ›´æ–°æ—¥å¿—

**ç‰ˆæœ¬ï¼šv0.2.0**
**æ—¥æœŸï¼š2026-01-02**

- âœ… æ–°å¢žå®‰é™å‘¼å¸æ•°è®°å½•åŠŸèƒ½
- âœ… ä¿®å¤é£Ÿç‰©å’Œæ°´æ‘„å…¥é‡è®¡ç®—é€»è¾‘
- âœ… æ–°å¢žæ•°æ®åº“å­—æ®µè¿½è¸ªé£Ÿç‰©å’Œæ°´çš„åˆ†åˆ«æ¶ˆè€—
- âœ… ä¼˜åŒ–ç»Ÿè®¡å±•ç¤ºï¼Œå¢žåŠ å‘¼å¸æ•°è¶‹åŠ¿å›¾

---

æœ‰ä»»ä½•é—®é¢˜è¯·æŸ¥çœ‹ `README.md` æˆ–è”ç³»å¼€å‘è€…ï¼

